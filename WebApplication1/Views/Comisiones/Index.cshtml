@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    @using Business.Entities;
    @using Business.Logic;
    @using System.Collections.Generic;
    @using System.Linq;

    ViewData["Title"] = "Comisiones";

    ComisionLogic cl = new ComisionLogic();
    PlanesLogic pl = new PlanesLogic();
    List<Plan> planes = pl.GetAll();

}
<h1>Menu de comisiones</h1>

@{if (!string.IsNullOrEmpty(ViewBag.msgerror))
    {
        <div class="alert alert-danger">
            <p>@ViewBag.msgerror</p>
        </div>
    }
}

<table class="table table-dark table-hover" id="tabcoms">
    <th>ID</th>
    <th>Descripcion</th>
    <th>Plan</th>
    <th>Año de especialidad</th>
    @{ 
        foreach(Comision c in cl.GetAll())
        {
            var cplan = from Plan plan in planes where plan.ID == c.IDPlan select plan;

            <tr>
                <td>@c.ID</td>
                <td>@c.Descripcion</td>
                <td>@cplan.First().Descripcion</td>
                <td>@c.AnioEspecialidad</td>
            </tr>
        }
    }
</table>